 injection-tss TSS: hosted page injected
 injection-tss MBTSS: Nonce:  nonce
 Removing unpermitted intrinsics
 CONTENT_SHELL: Page allowed. Skipping shell injection blocks
 TSS: excluded result:  true
 DFP: Breach notification feature flag is enabled. true
 Browsing Topics API removed
 [vite] connecting...
 [vite] connected.
 Creating new Firebase app instance
 Firebase initialized in PRODUCTION mode
 Legacy Firebase auth state listener disabled, using centralized AuthService instead
 Using PRODUCTION Firebase services - skipping emulator connection
 Using production Firebase services - emulator connection disabled
 Using production Firebase services - emulator connection disabled
 AdminAuthProvider: Setting up auth state listener via authService
 useAuthService: Setting up auth state listener
 Initializing Firestore collections in production mode...
 Skipping collection verification during initialization (will verify after authentication)
 [DEBUG-AUTH] App.tsx: Initial setup complete, using consolidated auth providers
 injection-tss TSS: hosted page injected
 injection-tss MBTSS: Nonce:  nonce
 CONTENT_SHELL: Page allowed. Skipping shell injection blocks
 TSS: excluded result:  true
 DFP: Breach notification feature flag is enabled. true
 Browsing Topics API removed
 [DEBUG-AUTH] AuthService.onAuthStateChanged: User signed in
 [DEBUG-AUTH] User signed in details: Object
 AdminAuthProvider: Auth state changed: User signed in
 useAuthService: Auth state changed: User signed in
 [DEBUG-AUTH] AuthService.onIdTokenChanged: Token updated
 [DEBUG-AUTH] ID token updated for user: Object
 [DEBUG-AUTH] Storing new auth token in localStorage, tokenLength: 966
 AuthService: Firebase auth persistence set to LOCAL
 AdminAuthProvider: User is not an admin
 QueryFn: Fetching data from /api/yachts/featured
 AuthService: Roles are in sync: consumer
 [DEBUG-AUTH] AuthService.onIdTokenChanged: Token updated
 [DEBUG-AUTH] ID token updated for user: Object
 Successfully obtained fresh auth token
 QueryFn: Using token: eyJhbGciOi...LpPXw
 QueryFn: Sending fetch request...
 [DEBUG-AUTH] Storing new auth token in localStorage, tokenLength: 966
 AuthService: Roles are in sync: consumer
 QueryFn: Response status: 200 OK
 QueryFn: Successfully parsed JSON response with 6 keys
 QueryFn: Array response with 6 items
 AuthService: Roles are in sync: consumer
 TSS: Counted history being pushed
 TSS: Caught history
 TSS: Checking if repeated 500 times for interval 1000 against data:  Object
 useAuthService: Setting up auth state listener
/login:1 [DOM] Input elements should have autocomplete attributes (suggested: "current-password"): (More info: https://goo.gl/9p2vKq) null
 AuthService: Roles are in sync: consumer
 Login component: User already authenticated, redirecting to dashboard
 TSS: Counted history being pushed
 TSS: Caught history
 TSS: Checking if repeated 500 times for interval 1000 against data:  Object
 useAuthService: Setting up auth state listener
 AuthService: Roles are in sync: consumer
 AuthService: Roles are in sync: consumer
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 useAuthService: Setting up auth state listener
 === Fetching User Profile ===
 === Fetching User Bookings via API ===
 === Fetching Recommended Yachts via API ===
 API response: Array(6)
 Transformed recommended packages: Array(6)
 Found user profile by ID
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 AuthService: Roles are in sync: consumer
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 API bookings response: Object
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 Got coordinates: Object
 Calling reverse geocode proxy with coordinates: Object
 Successfully retrieved address: F9M5+72H - Al Hisn - W3 - Abu Dhabi - United Arab Emirates
 Reverse geocode result: Object
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 TSS: Counted history being pushed
 TSS: Caught history
 TSS: Checking if repeated 500 times for interval 1000 against data:  Object
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 [DEBUG-AUTH] AuthService.onIdTokenChanged: No token
 [DEBUG-AUTH] ID token changed to null, stack trace: Error
    at Object.next (https://491f404d-c45b-465e-abd0-1bf1a522988f-00-1vx2q8nj9olr6.janeway.replit.dev/src/services/auth/auth-service.ts:435:78)
    at https://491f404d-c45b-465e-abd0-1bf1a522988f-00-1vx2q8nj9olr6.janeway.replit.dev/@fs/home/runner/workspace/node_modules/.vite/deps/chunk-RQVQBE7F.js?v=3f1f7aa6:868:16
    at https://491f404d-c45b-465e-abd0-1bf1a522988f-00-1vx2q8nj9olr6.janeway.replit.dev/@fs/home/runner/workspace/node_modules/.vite/deps/chunk-RQVQBE7F.js?v=3f1f7aa6:960:11
 [DEBUG-AUTH] Local storage state at token removal: Object
 [DEBUG-AUTH] Removing auth token from localStorage due to null user
 [DEBUG-AUTH] AuthService.onAuthStateChanged: User signed out
 [DEBUG-AUTH] Auth state changed to signed-out, stack trace: Error
    at Object.next (https://491f404d-c45b-465e-abd0-1bf1a522988f-00-1vx2q8nj9olr6.janeway.replit.dev/src/services/auth/auth-service.ts:391:86)
    at https://491f404d-c45b-465e-abd0-1bf1a522988f-00-1vx2q8nj9olr6.janeway.replit.dev/@fs/home/runner/workspace/node_modules/.vite/deps/chunk-RQVQBE7F.js?v=3f1f7aa6:868:16
    at https://491f404d-c45b-465e-abd0-1bf1a522988f-00-1vx2q8nj9olr6.janeway.replit.dev/@fs/home/runner/workspace/node_modules/.vite/deps/chunk-RQVQBE7F.js?v=3f1f7aa6:960:11
 AdminAuthProvider: Auth state changed: User signed out
 AdminAuthProvider: User is signed out, clearing admin session
 useAuthService: Auth state changed: User signed out
 useAuthService: Auth state changed: User signed out
 useAuthService: Auth state changed: User signed out
 PrivateRoute: Redirecting to login - not authenticated
 TSS: Counted history being pushed
 TSS: Caught history
 TSS: Checking if repeated 500 times for interval 1000 against data:  Object
 useAuthService: Setting up auth state listener
 TSS: Counted history being pushed
 TSS: Caught history
 TSS: Checking if repeated 500 times for interval 1000 against data:  Object
/login:1 [DOM] Input elements should have autocomplete attributes (suggested: "current-password"): (More info: https://goo.gl/9p2vKq) 
 TSS: Counted history being pushed
 TSS: Caught history
 TSS: Checking if repeated 500 times for interval 1000 against data:  Object
 Login component: Attempting login for email: thurstjo@icloud.com
 [DEBUG-AUTH] AuthService.onIdTokenChanged: Token updated
 [DEBUG-AUTH] ID token updated for user: Object
 [DEBUG-AUTH] AuthService.onAuthStateChanged: User signed in
 [DEBUG-AUTH] User signed in details: Object
 AdminAuthProvider: Auth state changed: User signed in
 useAuthService: Auth state changed: User signed in
 useAuthService: Auth state changed: User signed in
 [DEBUG-AUTH] Storing new auth token in localStorage, tokenLength: 966
 AdminAuthProvider: User is not an admin
 AuthService: Stored fresh auth token in localStorage after login
 Login component: Successfully logged in user: HEUJCCukkCbNP2jsETBLt6Ngmuy1
 AuthService: Roles are in sync: consumer
 AuthService: Roles are in sync: consumer
 Login component: User already authenticated, redirecting to dashboard
 AuthService: Roles are in sync: consumer
 TSS: Counted history being pushed
 TSS: Caught history
 TSS: Checking if repeated 500 times for interval 1000 against data:  Object
 useAuthService: Setting up auth state listener
 AuthService: Roles are in sync: consumer
 AuthService: Roles are in sync: consumer
 AuthService: Roles are in sync: consumer
 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. 
overrideMethod @ installHook.js:1
 useAuthService: Setting up auth state listener
Consumer.tsx:183 === Fetching User Profile ===
Consumer.tsx:253 === Fetching User Bookings via API ===
Consumer.tsx:286 === Fetching Recommended Yachts via API ===
use-geolocation.ts:37 Got coordinates: Object
reverseGeocode.ts:26 Calling reverse geocode proxy with coordinates: Object
Consumer.tsx:190 Found user profile by ID
hook.js:608 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. Error Component Stack
    at div (<anonymous>)
    at div (<anonymous>)
    at nav (<anonymous>)
    at div (<anonymous>)
    at DashboardLayout (DashboardLayout.tsx:29:35)
    at ConsumerDashboard (Consumer.tsx:113:21)
    at PrivateRoute (PrivateRoute.tsx:29:3)
    at Route (wouter.js?v=3f1f7aa6:323:16)
    at Switch (wouter.js?v=3f1f7aa6:379:17)
    at Suspense (<anonymous>)
    at main (<anonymous>)
    at div (<anonymous>)
    at AdminAuthProvider (use-admin-auth.ts:100:3)
    at AdminAuthProvider (AdminAuthProvider.tsx:10:3)
    at AuthProvider (auth-provider.tsx:26:32)
    at QueryClientProvider (@tanstack_react-query.js?v=3f1f7aa6:2805:3)
    at App (App.tsx:95:3)
overrideMethod @ hook.js:608
Consumer.tsx:295 API response: Array(6)
Consumer.tsx:310 Transformed recommended packages: Array(6)
auth-service.ts:521 AuthService: Roles are in sync: consumer
hook.js:608 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. Error Component Stack
    at div (<anonymous>)
    at div (<anonymous>)
    at nav (<anonymous>)
    at div (<anonymous>)
    at DashboardLayout (DashboardLayout.tsx:29:35)
    at ConsumerDashboard (Consumer.tsx:113:21)
    at PrivateRoute (PrivateRoute.tsx:29:3)
    at Route (wouter.js?v=3f1f7aa6:323:16)
    at Switch (wouter.js?v=3f1f7aa6:379:17)
    at Suspense (<anonymous>)
    at main (<anonymous>)
    at div (<anonymous>)
    at AdminAuthProvider (use-admin-auth.ts:100:3)
    at AdminAuthProvider (AdminAuthProvider.tsx:10:3)
    at AuthProvider (auth-provider.tsx:26:32)
    at QueryClientProvider (@tanstack_react-query.js?v=3f1f7aa6:2805:3)
    at App (App.tsx:95:3)
overrideMethod @ hook.js:608
reverseGeocode.ts:39 Successfully retrieved address: F9M5+72H - Al Hisn - W3 - Abu Dhabi - United Arab Emirates
use-geolocation.ts:62 Reverse geocode result: Object
hook.js:608 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. Error Component Stack
    at div (<anonymous>)
    at div (<anonymous>)
    at nav (<anonymous>)
    at div (<anonymous>)
    at DashboardLayout (DashboardLayout.tsx:29:35)
    at ConsumerDashboard (Consumer.tsx:113:21)
    at PrivateRoute (PrivateRoute.tsx:29:3)
    at Route (wouter.js?v=3f1f7aa6:323:16)
    at Switch (wouter.js?v=3f1f7aa6:379:17)
    at Suspense (<anonymous>)
    at main (<anonymous>)
    at div (<anonymous>)
    at AdminAuthProvider (use-admin-auth.ts:100:3)
    at AdminAuthProvider (AdminAuthProvider.tsx:10:3)
    at AuthProvider (auth-provider.tsx:26:32)
    at QueryClientProvider (@tanstack_react-query.js?v=3f1f7aa6:2805:3)
    at App (App.tsx:95:3)
overrideMethod @ hook.js:608
Consumer.tsx:265 API bookings response: Object
injection-tss-mv3.js:1 TSS: Counted history being pushed
injection-tss-mv3.js:1 TSS: Caught history
injection-tss-mv3.js:1 TSS: Checking if repeated 500 times for interval 1000 against data:  Object
hook.js:608 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. Error Component Stack
    at div (<anonymous>)
    at div (<anonymous>)
    at nav (<anonymous>)
    at div (<anonymous>)
    at DashboardLayout (DashboardLayout.tsx:29:35)
    at ConsumerDashboard (Consumer.tsx:113:21)
    at PrivateRoute (PrivateRoute.tsx:29:3)
    at Route (wouter.js?v=3f1f7aa6:323:16)
    at Switch (wouter.js?v=3f1f7aa6:379:17)
    at Suspense (<anonymous>)
    at main (<anonymous>)
    at div (<anonymous>)
    at AdminAuthProvider (use-admin-auth.ts:100:3)
    at AdminAuthProvider (AdminAuthProvider.tsx:10:3)
    at AuthProvider (auth-provider.tsx:26:32)
    at QueryClientProvider (@tanstack_react-query.js?v=3f1f7aa6:2805:3)
    at App (App.tsx:95:3)
overrideMethod @ hook.js:608
hook.js:608 Warning: Encountered two children with the same key, `/dashboard/consumer?tab=explore`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version. Error Component Stack
    at div (<anonymous>)
    at div (<anonymous>)
    at nav (<anonymous>)
    at div (<anonymous>)
    at DashboardLayout (DashboardLayout.tsx:29:35)
    at ConsumerDashboard (Consumer.tsx:113:21)
    at PrivateRoute (PrivateRoute.tsx:29:3)
    at Route (wouter.js?v=3f1f7aa6:323:16)
    at Switch (wouter.js?v=3f1f7aa6:379:17)
    at Suspense (<anonymous>)
    at main (<anonymous>)
    at div (<anonymous>)
    at AdminAuthProvider (use-admin-auth.ts:100:3)
    at AdminAuthProvider (AdminAuthProvider.tsx:10:3)
    at AuthProvider (auth-provider.tsx:26:32)
    at QueryClientProvider (@tanstack_react-query.js?v=3f1f7aa6:2805:3)
    at App (App.tsx:95:3)
overrideMethod @ hook.js:608
